AI è§’è‰²æ‰®æ¼”ç½‘ç«™ Â· MVP
ä¸€ã€äº§å“å®šä½

ç›®æ ‡
å¼€å‘ä¸€ä¸ªç®€æ´çš„ Web åŸå‹ï¼Œç”¨æˆ·èƒ½é€‰æ‹©è§’è‰²ï¼ˆå¦‚å“ˆåˆ©æ³¢ç‰¹ / èœ˜è››ä¾ ï¼‰ï¼Œå¹¶é€šè¿‡è¯­éŸ³ä¸å…¶èŠå¤©ï¼ˆè¯­éŸ³è¾“å…¥ â†’ AI å›å¤ â†’ è¯­éŸ³è¾“å‡ºï¼‰ã€‚

æ ¸å¿ƒä»·å€¼
ä¸ºå½±è§†/åŠ¨æ¼«çˆ±å¥½è€…ã€è¯­è¨€å­¦ä¹ è€…ã€å¨±ä¹ç”¨æˆ·æä¾›æ²‰æµ¸å¼äº’åŠ¨ä½“éªŒã€‚

äºŒã€ç›®æ ‡ç”¨æˆ·ä¸ç”¨æˆ·æ•…äº‹
ğŸ¯ ç›®æ ‡ç”¨æˆ·

é’å°‘å¹´ä¸äºŒæ¬¡å…ƒ/å½±è§†çˆ±å¥½è€…ï¼šæƒ³å’Œè‡ªå·±å–œæ¬¢çš„è§’è‰²äº’åŠ¨ã€‚

è‹±è¯­å­¦ä¹ è€…ï¼šå€ŸåŠ©è§’è‰²æ‰®æ¼”æå‡å£è¯­è¡¨è¾¾ã€‚

å¨±ä¹ç”¨æˆ·ï¼šæƒ³ä½“éªŒæ²‰æµ¸å¼çš„è¶£å‘³èŠå¤©ã€‚

æƒ…æ„Ÿå¯„æ‰˜è€…ï¼šä¸Šä¼ å£°éŸ³ï¼Œè®© AI æ¨¡æ‹Ÿè¯­æ°”é™ªä¼´äº¤æµã€‚

ğŸ“– ç”¨æˆ·æ•…äº‹

å°æ˜ï¼ˆ18 å²ï¼‰ï¼šé€‰æ‹©å“ˆåˆ©æ³¢ç‰¹ï¼Œç”¨è¯­éŸ³é—®â€œä»Šå¤©é­”æ³•è¯¾å­¦ä»€ä¹ˆï¼Ÿâ€ï¼ŒAI è¯­éŸ³å›å¤ã€‚

å°çº¢ï¼ˆ20 å²ï¼‰ï¼šé€‰æ‹©èœ˜è››ä¾ ï¼Œç”¨è‹±æ–‡é—®â€œCan you teach me some fighting moves?â€ï¼ŒAI ç”¨è‹±æ–‡è¯­éŸ³å›ç­”ã€‚

ç« é˜¿å§¨ï¼ˆ45 å²ï¼‰ï¼šä¸Šä¼ çˆ·çˆ·çš„å£°éŸ³æ ·æœ¬ï¼ŒAI æ¨¡æ‹Ÿçˆ·çˆ·è¯­æ°”ä¸å¥¹å¯¹è¯ã€‚

ä¸‰ã€åŠŸèƒ½è®¾è®¡ä¸ä¼˜å…ˆçº§
âœ… é«˜ä¼˜å…ˆçº§ï¼ˆMVP å¿…é¡»å®ç°ï¼‰

è§’è‰²é€‰æ‹©ï¼ˆ2~3 ä¸ªé¢„è®¾è§’è‰²ï¼‰

è¯­éŸ³è¾“å…¥ï¼ˆASRï¼‰

AI æ–‡æœ¬å›å¤

è¯­éŸ³è¾“å‡ºï¼ˆTTSï¼‰

çŸ­è®°å¿†ï¼ˆ3~5 è½®ä¸Šä¸‹æ–‡ï¼‰

âš–ï¸ ä¸­ä¼˜å…ˆçº§

ç”¨æˆ·è‡ªå®šä¹‰è§’è‰²ï¼ˆä¸Šä¼ å£°éŸ³æ ·æœ¬ï¼‰

æ›´å¤šè§’è‰²æ‰©å±•

å¯¹è¯å†å²å­˜æ¡£

ç”¨æˆ·è´¦å·ç³»ç»Ÿ

ğŸ’¤ ä½ä¼˜å…ˆçº§

ç¾¤èŠ / å¤šäººäº’åŠ¨

è™šæ‹Ÿå½¢è±¡ / åŠ¨ç”»å±•ç¤º

ğŸ“Œ æœ¬æ¬¡å¼€å‘èŒƒå›´ï¼ˆMVPï¼‰ï¼š è§’è‰²é€‰æ‹© + è¯­éŸ³èŠå¤©ï¼ˆè¾“å…¥ + è¾“å‡ºï¼‰ + ç®€å•è®°å¿†

å››ã€æŠ€æœ¯é€‰å‹

å‰ç«¯

æ¡†æ¶ï¼šVue3 + ElementPlus

åŠŸèƒ½ï¼šè§’è‰²é€‰æ‹©é¡µã€èŠå¤©ç•Œé¢ï¼ˆæ–‡æœ¬/è¯­éŸ³è¾“å…¥ + è¯­éŸ³è¾“å‡ºï¼‰

åç«¯

è¯­è¨€ï¼šPythonï¼ˆFastAPIï¼‰

ç†ç”±ï¼šAI ç”Ÿæ€å¼ºå¤§ï¼ˆWhisperã€TTSã€OpenAI SDKï¼‰ã€åŸå‹å¼€å‘å¿«

AI æ¨¡å‹

å€™é€‰ï¼šOpenAI GPT-4o-mini / DeepSeek-R1 / Claude 3.5 Sonnet

é€‰ç”¨ï¼šGPT-4o-miniï¼ˆæˆæœ¬ä½ã€å“åº”å¿«ã€ç”Ÿæ€æˆç†Ÿï¼‰

è¯­éŸ³æ¨¡å—

ASRï¼šWhisper API

TTSï¼šEdge TTSï¼ˆå…è´¹ï¼‰æˆ– ElevenLabsï¼ˆæ›´è‡ªç„¶ï¼‰

äº”ã€ç³»ç»Ÿæ¶æ„
å‰ç«¯ï¼ˆVue3ï¼‰ â†’ WebSocket / REST API
â†“
åç«¯ï¼ˆFastAPIï¼‰

1.  æ¥æ”¶è¯­éŸ³ â†’ Whisper è½¬æ–‡å­—
2.  è°ƒç”¨ GPT-4o-mini â†’ è¿”å›æ–‡æœ¬
3.  è°ƒç”¨ TTS â†’ è¿”å›éŸ³é¢‘æµ
4.  Redis ç»´æŠ¤çŸ­è®°å¿†

å…­ã€æ¯æ—¥ä»»åŠ¡æ‹†è§£ï¼ˆ5 å¤©ï¼‰

Day 1ï¼šéœ€æ±‚æ¢³ç† & æŠ€æœ¯é€‰å‹ï¼Œæ­å»ºæ¡†æ¶

Day 2ï¼šå‰åç«¯æ‰“é€š /chat API

Day 3ï¼šæ¥å…¥è¯­éŸ³è¾“å…¥è¾“å‡ºï¼ˆWhisper + Edge TTSï¼‰

Day 4ï¼šè§’è‰²äººè®¾ Prompt + çŸ­è®°å¿†å®ç°

Day 5ï¼šæµ‹è¯• + æ–‡æ¡£ + æäº¤

ä¸ƒã€æŠ€æœ¯éš¾ç‚¹ä¸äº®ç‚¹

é«˜å¹¶å‘ä¸‹çš„ä¼šè¯ä¸€è‡´æ€§

ç±»ä¼¼ç”µå•†â€œé˜²æ­¢è¶…å–â€

æ–¹æ¡ˆï¼šsession_id éš”ç¦» + Redis å­˜å‚¨æœ€è¿‘å¯¹è¯

å»¶è¿Ÿä¼˜åŒ–

é“¾è·¯å¯èƒ½ > 5 ç§’

æ–¹æ¡ˆï¼šæµå¼ ASR/TTS + é˜Ÿåˆ—ä¼˜åŒ–

è§’è‰²äººæ ¼ä¿æŒ

ç³»ç»Ÿçº§ Prompt + ä¸Šä¸‹æ–‡æ‘˜è¦åŒ–ä¿ç•™è§’è‰²èº«ä»½

æƒ…æ„Ÿä»·å€¼æ‰©å±•

æ¨¡æ‹Ÿäº²äººå£°éŸ³ï¼Œæ»¡è¶³æƒ…æ„Ÿå¯„æ‰˜

å…«ã€æœªæ¥æ‰©å±•æ–¹å‘

æ›´å¤šè§’è‰²æ‰©å±•ï¼ˆåŠ¨æ¼«/æ¸¸æˆ IPï¼‰

å¤šæŠ€èƒ½è§’è‰²ï¼ˆæƒ…æ„Ÿè¯†åˆ«ã€ä»»åŠ¡äº’åŠ¨ï¼‰

è™šæ‹Ÿå½¢è±¡æ¸²æŸ“ï¼ˆWebGL / Unityï¼‰

è´¦å·ç³»ç»Ÿ + é•¿æœŸå¯¹è¯å­˜æ¡£

ä¹ã€é¡¹ç›®å¯åŠ¨è¯´æ˜

## ç¯å¢ƒè¦æ±‚

- Python 3.8+
- MySQL 5.7+ æˆ– 8.0+
- pip åŒ…ç®¡ç†å™¨

## å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd backend

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
# æ›´æ–°ä¾èµ–
pip freeze > requirements.txt

# å¯åŠ¨æœåŠ¡
uvicorn app.main:app --reload

# å¦‚æœä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
pip install -r requirements.txt
```

### 2. æ•°æ®åº“é…ç½®

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
# Windows
set DB_HOST=localhost
set DB_PORT=3306
set DB_USER=root
set DB_PASSWORD=123456
set DB_NAME=cyber

# Linux/Mac
export DB_HOST=localhost
export DB_PORT=3306
export DB_USER=root
export DB_PASSWORD=123456
export DB_NAME=cyber
```

#### æ–¹å¼äºŒï¼šç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `app/db/session.py` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥å‚æ•°ã€‚

### 3. LLM æ¨¡å— API å¯†é’¥é…ç½®

**é‡è¦ï¼š** LLM æ¨¡å—éœ€è¦ API å¯†é’¥æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

#### åˆ›å»º API å¯†é’¥é…ç½®æ–‡ä»¶

åœ¨ `app/llm/` ç›®å½•ä¸‹åˆ›å»º `api_keys.json` æ–‡ä»¶ï¼š

```json
{
  "api_key": "your-api-key-here",
  "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
  "model": "text-embedding-v4"
}
```

#### é…ç½®è¯´æ˜

- **æ–‡ä»¶ä½ç½®ï¼š** `app/llm/api_keys.json`
- **æ–‡ä»¶æ ¼å¼ï¼š** JSON æ ¼å¼
- **å¿…å¡«å­—æ®µï¼š**
  - `api_key`: é˜¿é‡Œäº‘ç™¾ç‚¼æœåŠ¡çš„ API å¯†é’¥
  - `base_url`: API æœåŠ¡åœ°å€ï¼ˆé»˜è®¤ä¸ºé˜¿é‡Œäº‘ç™¾ç‚¼å…¼å®¹æ¨¡å¼ï¼‰
  - `model`: ä½¿ç”¨çš„æ¨¡å‹åç§°

#### å®‰å…¨æ³¨æ„äº‹é¡¹

- è¯¥æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore` ä¸­ï¼Œä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- è¯·å¦¥å–„ä¿ç®¡ API å¯†é’¥ï¼Œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
- å›¢é˜Ÿæˆå‘˜éœ€è¦å„è‡ªåˆ›å»ºè‡ªå·±çš„ `api_keys.json` æ–‡ä»¶

#### æ”¯æŒçš„åŠŸèƒ½æ¨¡å—

æ­¤é…ç½®æ–‡ä»¶è¢«ä»¥ä¸‹æ¨¡å—ä½¿ç”¨ï¼š

- `embedding_api.py` - æ–‡æœ¬å‘é‡åŒ–
- `llm_api.py` - å¤§è¯­è¨€æ¨¡å‹å¯¹è¯
- `tts_api.py` - æ–‡æœ¬è½¬è¯­éŸ³
- `fun_asr.py` - è¯­éŸ³è¯†åˆ«

### 4. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# ç”Ÿäº§æ¨¡å¼å¯åŠ¨
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### 4. éªŒè¯å¯åŠ¨

è®¿é—®ä»¥ä¸‹åœ°å€éªŒè¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼š

- ä¸»é¡µï¼šhttp://localhost:8000
- API æ–‡æ¡£ï¼šhttp://localhost:8000/docs
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health

## FastAPI æ¥å£æŸ¥çœ‹æ–¹æ³•

### 1. Swagger UI æ–‡æ¡£ï¼ˆæ¨èï¼‰

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ï¼šhttp://localhost:8000/docs

åŠŸèƒ½ç‰¹ç‚¹ï¼š

- ğŸ“– å®Œæ•´çš„ API æ–‡æ¡£å±•ç¤º
- ğŸ§ª åœ¨çº¿æ¥å£æµ‹è¯•åŠŸèƒ½
- ğŸ“ è¯·æ±‚/å“åº”ç¤ºä¾‹
- ğŸ” æ¥å£å‚æ•°è¯¦ç»†è¯´æ˜

### 2. ReDoc æ–‡æ¡£

è®¿é—®ï¼šhttp://localhost:8000/redoc

åŠŸèƒ½ç‰¹ç‚¹ï¼š

- ğŸ“š æ›´åŠ ç¾è§‚çš„æ–‡æ¡£ç•Œé¢
- ğŸ“‹ ç»“æ„åŒ–çš„ API å±•ç¤º
- ğŸ”— ä¾¿äºåˆ†äº«å’ŒæŸ¥é˜…

### 3. OpenAPI JSON

è®¿é—®ï¼šhttp://localhost:8000/openapi.json

- è·å–å®Œæ•´çš„ OpenAPI è§„èŒƒ JSON æ–‡ä»¶
- å¯ç”¨äºç”Ÿæˆå®¢æˆ·ç«¯ SDK

### 4. å‘½ä»¤è¡ŒæŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰è·¯ç”±
uvicorn app.main:app --reload --log-level info

# ä½¿ç”¨curlæµ‹è¯•æ¥å£
curl -X GET "http://localhost:8000/health"
curl -X GET "http://localhost:8000/api/roles/"
```

## æ•°æ®åº“åˆå§‹åŒ–å’Œè¿ç§»æ“ä½œæŒ‡å—

### 1. è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

#### ä½¿ç”¨ API æ¥å£åˆå§‹åŒ–

```bash
# å¯åŠ¨æœåŠ¡åï¼Œè°ƒç”¨åˆå§‹åŒ–æ¥å£
curl -X POST "http://localhost:8000/api/database/init"

# æˆ–åœ¨æµè§ˆå™¨ä¸­è®¿é—® Swagger UI è¿›è¡Œæ“ä½œ
# http://localhost:8000/docs#/æ•°æ®åº“ç®¡ç†/initialize_database_api_database_init_post
```

#### åˆå§‹åŒ–å†…å®¹åŒ…æ‹¬ï¼š

- âœ… è‡ªåŠ¨åˆ›å»º `cyber` æ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- âœ… åˆ›å»ºæ‰€æœ‰å¿…è¦çš„æ•°æ®è¡¨
- âœ… æ’å…¥é¢„è®¾è§’è‰²æ•°æ®ï¼š
  - å“ˆåˆ©æ³¢ç‰¹ï¼ˆéœæ ¼æ²ƒèŒ¨é­”æ³•å­¦æ ¡å­¦ç”Ÿï¼‰
  - èœ˜è››ä¾ ï¼ˆçº½çº¦è¶…çº§è‹±é›„ï¼‰

### 2. æ‰‹åŠ¨æ•°æ®åº“æ“ä½œ

#### åˆ›å»ºæ•°æ®åº“

```sql
-- è¿æ¥MySQLæœåŠ¡å™¨
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE cyber CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE cyber;
```

#### æ£€æŸ¥æ•°æ®åº“çŠ¶æ€

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
curl -X GET "http://localhost:8000/api/database/test-connection"

# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
curl -X GET "http://localhost:8000/api/database/status"
```

### 3. æ•°æ®åº“é‡ç½®ï¼ˆè°¨æ…æ“ä½œï¼‰

```bash
# é‡ç½®æ•°æ®åº“ï¼ˆåˆ é™¤æ‰€æœ‰æ•°æ®å¹¶é‡æ–°åˆå§‹åŒ–ï¼‰
curl -X POST "http://localhost:8000/api/database/reset?confirm=true"
```

âš ï¸ **æ³¨æ„äº‹é¡¹ï¼š**

- é‡ç½®æ“ä½œä¼šåˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®
- ç”Ÿäº§ç¯å¢ƒè¯·è°¨æ…ä½¿ç”¨
- å»ºè®®åœ¨é‡ç½®å‰å¤‡ä»½é‡è¦æ•°æ®

### 4. æ•°æ®åº“è¿ç§»

#### è¡¨ç»“æ„å˜æ›´

å½“æ¨¡å‹æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼š

1. ä¿®æ”¹ `app/models/` ç›®å½•ä¸‹çš„æ¨¡å‹æ–‡ä»¶
2. é‡å¯æœåŠ¡ï¼ŒSQLAlchemy ä¼šè‡ªåŠ¨æ£€æµ‹å˜æ›´
3. æˆ–è°ƒç”¨åˆå§‹åŒ–æ¥å£é‡æ–°åˆ›å»ºè¡¨ç»“æ„

#### æ•°æ®å¤‡ä»½ä¸æ¢å¤

```bash
# å¤‡ä»½æ•°æ®åº“
mysqldump -u root -p cyber > backup_$(date +%Y%m%d_%H%M%S).sql

# æ¢å¤æ•°æ®åº“
mysql -u root -p cyber < backup_20240101_120000.sql
```

### 5. å¸¸è§é—®é¢˜æ’æŸ¥

#### è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
# Windows
net start mysql

# Linux
sudo systemctl status mysql
sudo systemctl start mysql
```

#### æƒé™é—®é¢˜

```sql
-- åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ
CREATE USER 'cyber_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON cyber.* TO 'cyber_user'@'localhost';
FLUSH PRIVILEGES;
```

#### ç¼–ç é—®é¢˜

ç¡®ä¿æ•°æ®åº“å’Œè¡¨éƒ½ä½¿ç”¨ `utf8mb4` ç¼–ç ï¼š

```sql
ALTER DATABASE cyber CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

ğŸ“Œ æ€»ç»“

ç›®æ ‡ï¼š5 å¤©å†…äº¤ä»˜ã€Œè§’è‰²é€‰æ‹© + è¯­éŸ³å¯¹è¯ã€å®Œæ•´åŸå‹

æŠ€æœ¯äº®ç‚¹ï¼šé«˜å¹¶å‘ä¼šè¯ä¸€è‡´æ€§ã€å»¶è¿Ÿä¼˜åŒ–ã€è§’è‰²äººæ ¼ä¿æŒ

ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ï¼ˆMVP èŒƒå›´ï¼‰

MVP ä¸éœ€è¦å¤æ‚è´¦å·ç³»ç»Ÿï¼Œæ ¸å¿ƒè¡¨ï¼šè§’è‰² / ä¼šè¯ / æ¶ˆæ¯

1. è§’è‰²è¡¨ï¼ˆrolesï¼‰
   CREATE TABLE roles (
   id SERIAL PRIMARY KEY COMMENT 'è§’è‰² id',
   name VARCHAR(50) NOT NULL COMMENT 'è§’è‰²å',
   description TEXT COMMENT 'è§’è‰²æè¿°',
   voice_sample_url VARCHAR(255) COMMENT 'å£°éŸ³æ ·æœ¬ï¼ˆå¯é€‰ï¼‰',
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´'
   );

2. ä¼šè¯è¡¨ï¼ˆchat_sessionsï¼‰
   CREATE TABLE chat_sessions (
   id SERIAL PRIMARY KEY COMMENT 'ä¼šè¯ id',
   role_id INT NOT NULL COMMENT 'è§’è‰² id',
   last_message_at TIMESTAMP COMMENT 'æœ€è¿‘ä¸€æ¬¡å¯¹è¯æ—¶é—´',
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
   FOREIGN KEY (role_id) REFERENCES roles(id)
   );

3. æ¶ˆæ¯è¡¨ï¼ˆchat_messagesï¼‰
   CREATE TABLE chat_messages (
   id SERIAL PRIMARY KEY COMMENT 'æ¶ˆæ¯ id',
   session_id INT NOT NULL COMMENT 'ä¼šè¯ id',
   role INT NOT NULL COMMENT '0-assistant,1-user',
   content TEXT NOT NULL COMMENT 'æ¶ˆæ¯å†…å®¹',
   message_type VARCHAR(20) DEFAULT 'text' COMMENT 'æ¶ˆæ¯ç±»å‹ï¼Œæ–‡æœ¬/éŸ³é¢‘ç­‰',
   metadata JSON COMMENT 'æ¶ˆæ¯å…ƒæ•°æ®ï¼ˆå¦‚éŸ³é¢‘ URL/æ—¶é•¿/æ ¼å¼ï¼‰',
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
   FOREIGN KEY (session_id) REFERENCES chat_sessions(id)
   );

ğŸŒ API è®¾è®¡ï¼ˆMVP èŒƒå›´ï¼‰

## å®Œæ•´ API æ¥å£åˆ—è¡¨

### 1. æ•°æ®åº“ç®¡ç†æ¥å£ `/api/database`

- `POST /api/database/init` â†’ åˆå§‹åŒ–æ•°æ®åº“å’ŒåŸºç¡€æ•°æ®
- `GET /api/database/test-connection` â†’ æµ‹è¯•æ•°æ®åº“è¿æ¥
- `GET /api/database/status` â†’ è·å–æ•°æ®åº“çŠ¶æ€ä¿¡æ¯
- `POST /api/database/reset` â†’ é‡ç½®æ•°æ®åº“ï¼ˆéœ€ç¡®è®¤ï¼‰

### 2. è§’è‰²æ¥å£ `/api/roles`

- `POST /api/roles/` â†’ åˆ›å»ºè§’è‰²
- `GET /api/roles/` â†’ è·å–è§’è‰²åˆ—è¡¨
- `GET /api/roles/{id}` â†’ è·å–è§’è‰²è¯¦æƒ…
- `PUT /api/roles/{id}` â†’ æ›´æ–°è§’è‰²
- `DELETE /api/roles/{id}` â†’ åˆ é™¤è§’è‰²
- `GET /api/roles/system/roles` â†’ è·å–ç³»ç»Ÿé¢„è®¾è§’è‰²

### 3. ä¼šè¯æ¥å£ `/api/sessions`

- `POST /api/sessions/` â†’ åˆ›å»ºæ–°ä¼šè¯ï¼ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²ï¼‰
- `GET /api/sessions/` â†’ è·å–æ‰€æœ‰ä¼šè¯åˆ—è¡¨
- `GET /api/sessions/{id}` â†’ è·å–ä¼šè¯è¯¦æƒ…
- `DELETE /api/sessions/{id}` â†’ åˆ é™¤ä¼šè¯

### 4. æ¶ˆæ¯æ¥å£ `/api/messages`

- `POST /api/messages/` â†’ å‘é€æ¶ˆæ¯
  - å…¥å‚ï¼šsession_id, role, content, message_type, metadata
  - å‡ºå‚ï¼šå­˜å‚¨æ¶ˆæ¯è®°å½•ï¼ˆå« AI å›å¤ï¼‰
- `GET /api/messages/?session_id={id}` â†’ è·å–æŸä¼šè¯çš„æ‰€æœ‰æ¶ˆæ¯

### 5. ç”¨æˆ·æ¥å£ `/api/users`

- `POST /api/users/` â†’ åˆ›å»ºç”¨æˆ·
- `GET /api/users/` â†’ è·å–ç”¨æˆ·åˆ—è¡¨
- `GET /api/users/{id}` â†’ è·å–ç”¨æˆ·è¯¦æƒ…
- `PUT /api/users/{id}` â†’ æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /api/users/{id}` â†’ åˆ é™¤ç”¨æˆ·

### 6. ç³»ç»Ÿæ¥å£

- `GET /` â†’ API åŸºæœ¬ä¿¡æ¯
- `GET /health` â†’ å¥åº·æ£€æŸ¥
